"use strict";angular.module("literatorioApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","pascalprecht.translate","angular-google-analytics","underscore","angular-speakingurl","webfont-loader","mcwebb.sound"]).filter("encodeURIComponent",["$window",function(a){return a.encodeURIComponent}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/verse/404",{templateUrl:"views/verse404.html",controller:"Verse404Ctrl",controllerAs:"verse404"}).when("/verse/:authorName/:verseName",{templateUrl:"views/verse.html",controller:"VerseCtrl",controllerAs:"verse"}).when("/catalog",{templateUrl:"views/catalog.html",controller:"CatalogCtrl",controllerAs:"catalog"}).when("/support",{templateUrl:"views/support.html",controller:"SupportCtrl",controllerAs:"support"}).otherwise({redirectTo:"/"})}]).config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"}),a.useSanitizeValueStrategy("escape");var b={"en-US":"en","ru-RU":"ru","*":"en"};a.registerAvailableLanguageKeys(["en","ru"],b).fallbackLanguage("en"),a.useLocalStorage()}]).config(["AnalyticsProvider",function(a){a.setAccount("UA-6315511-11"),a.trackPages(!1),a.useDisplayFeatures(!0),a.useAnalytics(!0)}]).run(["$rootScope","$injector","$window","$location","$translate","Analytics",function(a,b,c,d,e,f){a.global={},a.global.pageTitle="Literator.io",a.$on("$routeChangeSuccess",function(b,c){a.global.currentPage=c.$$route.controllerAs,f.trackPage(d.path())}),c.WebFont.load({custom:{families:["NotoSerif:n4,i4,n7"]}});try{var g=b.get("CountriesDataStore");g.loadSound({name:"bell",src:"resources/sounds/bell.mp3"})}catch(a){}b.get("CountriesDataStore")}]),angular.module("literatorioApp").controller("MainCtrl",["$rootScope","$scope","$location","$timeout","$translate","VerseDataStore","CountriesDataStore","Analytics",function(a,b,c,d,e,f,g,h){function i(){var c=g.getCurrentCountry();e("COMMON_APP_NAME").then(function(b){a.global.pageTitle=b}),b.isCatalogEnabled=!!c&&c.isCatalogEnabled,b.isLeaving=!1,b.onStartButtonClick=j,b.onShareClick=m,b.onSocialClick=n,b.onCatalogClick=o,b.onSupportClick=p,b.$on("CountriesDataStore.countryChange",l),b.$on("$destroy",q),r.push(d(function(){a.$broadcast("HeaderCtrl.doShow"),a.$broadcast("FooterCtrl.doShow"),a.$broadcast("GitHubRibbonCtrl.doShow")},3e3)),h.trackEvent("web","main-init")}function j(){f.getRandomVerse().then(function(a){k(a.url),h.trackEvent("web","main-start-btn-click")})}function k(e){b.isLeaving=!0,d(function(){c.url(e)},1500),a.$broadcast("HeaderCtrl.doHide"),a.$broadcast("FooterCtrl.doHide"),a.$broadcast("GitHubRibbonCtrl.doHide")}function l(a,c){b.isCatalogEnabled=c.country.isCatalogEnabled}function m(){h.trackEvent("web","main-share-click"),b.isSharePanelShown=!b.isSharePanelShown}function n(a){h.trackEvent("web","main-social-click",a)}function o(){h.trackEvent("web","main-catalog-click")}function p(){h.trackEvent("web","main-support-click")}function q(){r.forEach(function(a){d.cancel(a)})}var r=[];i()}]),angular.module("literatorioApp").controller("AboutCtrl",["$rootScope","$translate","Analytics",function(a,b,c){function d(){a.global.pageTitle=b.instant("COMMON_APP_NAME"),e("html, body").animate({scrollTop:0}),a.$broadcast("HeaderCtrl.doShow"),a.$broadcast("FooterCtrl.doShow"),a.$broadcast("GitHubRibbonCtrl.doHide"),c.trackEvent("web","about-init")}var e=angular.element;d()}]),angular.module("literatorioApp").controller("VerseCtrl",["$q","$rootScope","$scope","$location","$routeParams","$timeout","$interval","$translate","VerseDataStore","VerseBlock","SoundManager","CountriesDataStore","Analytics",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){var g=null;i.getVerseByAuthorAndName(e.authorName,e.verseName).then(function(b){if(g=b,!g)throw{type:404};return a.all({content:g.loadContent(),author:g.getAuthor()})}).then(function(a){O=g.authorName+"/"+g.name,R=g.getPieces(),Q=P("#content"),aa=P(".view-verse input"),a.author.getVerses(),c.$on("$destroy",H),Q.bind("click",C),c.verse=g,c.author=a.author,c.versePieces=[],c.currentBlock=null,c.inputFieldMaxLength=J+1,c.isIOS=N,c.isFinished=!1,c.isSkipped=!1,c.isLeaving=!1,c.isControlsHintVisible=!1,c.isSkipVerseOptionsVisible=!1,c.onInputFieldKeyup=B,c.onAnotherVerseButtonClick=D,c.onAnotherVerseOfAuthorButtonClick=E,c.onSkipVerseAcceptClick=F,c.onSkipVerseDeclineClick=G,U.push(f(function(){o(),V=new Date},2600)),b.global.pageTitle=g.title+" | "+h.instant("COMMON_APP_NAME"),b.$broadcast("HeaderCtrl.doHide"),b.$broadcast("FooterCtrl.doHide"),b.$broadcast("GitHubRibbonCtrl.doHide"),m.trackEvent("web","verse-init",O)}).catch(function(a){switch(m.trackEvent("web","verse-init-error",O),a.type){case 404:d.url("/verse/404")}})}function o(){S&&g.cancel(S),S=g(s,L)}function p(){S&&(g.cancel(S),S=null)}function q(){T&&g.cancel(T),_="",T=g(t,M)}function r(){T&&(g.cancel(T),T=null,_="")}function s(){var a=R.shift();return angular.isDefined(a)?void(!c.isSkipped&&a instanceof j?(p(),c.currentBlock=a,$++,f(function(){aa.focus()},100),aa.val(""),q(),z(aa),u()):c.versePieces.push(a)):(p(),aa.blur(),c.isFinished=!0,c.resultSeconds=Math.floor((Date.now()-V.getTime())/1e3),c.resultPercents=Math.ceil(($-Y)/($+.01)*100),c.resultPercentsAnimated=0,c.resultMark=l.getMarkForPercents(c.resultPercents),U.push(f(function(){c.isBottomVisible=!0,b.$broadcast("HeaderCtrl.doShow"),b.$broadcast("FooterCtrl.doShow"),U.push(f(function(){z(".view-verse .bottom")},50))},6e3)),U.push(f(function(){c.resultPercentsAnimated=0;var a=g(function(){c.resultPercentsAnimated+=1,c.resultPercentsAnimated>=c.resultPercents&&(g.cancel(a),c.isMarkVisible=!0)},30);U.push(a)},6500)),void(c.isSkipped||(m.trackEvent("web","verse-complete",O),m.trackEvent("web","verse-complete-percents",O,c.resultPercents),m.trackEvent("web","verse-complete-mark-"+c.resultMark,O),m.trackEvent("web","verse-complete-seconds",O,c.resultSeconds))))}function t(){var a=c.currentBlock.toString().substr(_.length,1);!a.length||_.length>=I?(y(),Y++,Z++,Z>0&&Z%K===0&&!c.isControlsHintVisible&&v()):(_+=a,0===String(aa.val()).indexOf(a)&&aa.val(String(aa.val()).substr(1)),c.versePieces.push(a),X++)}function u(){W||(W=!0,c.isControlsHintVisible=!0)}function v(){c.isSkipVerseOptionsVisible=!0}function w(){c.isSkipVerseOptionsVisible=!1}function x(){c.isControlsHintVisible=!1,c.$applyAsync()}function y(){if(c.currentBlock){var a=c.currentBlock.toString().substr(_.length);c.currentBlock=null,c.versePieces.push(a),aa.val(""),k.playSound("bell"),r(),o()}}function z(a,b){var c=P(a);if(c.size()){var d=Math.max(0,c.offset().top-window.innerHeight/(N?4:2));P("html, body").animate({scrollTop:d},b||300)}}function A(a){c.isLeaving=!0,z("body",1200),b.$broadcast("HeaderCtrl.doHide"),b.$broadcast("FooterCtrl.doHide"),U.push(f(function(){d.url(a)},1500))}function B(){c.currentBlock&&((c.currentBlock.match(_+aa.val(),J)||c.currentBlock.match(aa.val(),J))&&(y(),Z=0),x())}function C(a){["A","BUTTON"].indexOf(a.target.tagName)===-1&&(a.stopPropagation(),a.preventDefault()),aa.focus(),x()}function D(){m.trackEvent("web","verse-another-verse-btn-click",O),i.getRandomVerse().then(function(a){return c.verse.isMatch(a)?D():void A(a.url)})}function E(){m.trackEvent("web","verse-another-verse-of-author-btn-click",O),i.getRandomVerseForAuthor(e.authorName).then(function(a){return c.verse.isMatch(a)?D():void A(a.url)})}function F(){m.trackEvent("web","verse-skip-verse-accept",O),c.isSkipped=!0,w(),L=30,y(),p(),o()}function G(){m.trackEvent("web","verse-skip-verse-decline",O),c.isSkipVerseOptionsVisible=!1}function H(){Q.unbind("click",C),r(),p(),U.forEach(function(a){f.cancel(a),g.cancel(a)}),c.isFinished||m.trackEvent("web","verse-leave-uncompleted",O)}var I=2,J=3,K=3,L=100,M=4e3,N=/iPad|iPhone|iPod/.test(navigator.userAgent),O=null,P=angular.element,Q=null,R=null,S=null,T=null,U=[],V=null,W=!1,X=0,Y=0,Z=0,$=0,_=null,aa=null;n()}]),angular.module("literatorioApp").factory("Verse",["$injector","$http","VerseBlock",function(a,b,c){function d(a){angular.extend(this,a),this.path=[this.PATH_BASE,this.authorName,"verses",this.name].join("/"),this.url=[this.URL_BASE,this.authorName,this.name].join("/")}return d.prototype={DIFFICULTY_EASY:"easy",DIFFICULTY_NORMAL:"normal",BLOCK_SEPARATOR_START:"{",BLOCK_SEPARATOR_END:"}",URL_BASE:"/verse",PATH_BASE:"resources/verses",loadContent:function(){var a=this;return b({method:"GET",url:this.path+"/content.txt"}).then(function(b){var c=b.data.trim();return c=c.replace(/[\s](\x2d|\x2212|\x2010\x2012\x2043)/g," —").replace(/\n\r|\r\n|\r/g,"\n").replace(/[\n]{3,}/g,"\n\n").replace(/[\x20]{2,}/g," ").replace(/[\x20]\n/g,"\n"),a.content=c,a.plainText=c.replace(new RegExp("\\"+a.BLOCK_SEPARATOR_START+"|\\"+a.BLOCK_SEPARATOR_END,"g"),""),a})},getPieces:function(a){var b=this;a=angular.extend({difficulty:"easy"},a||{});var d=b.normalizeStringToDifficulty(b.content,a.difficulty).split(""),e=[],f=!1,g=null;return d.forEach(function(a){switch(a){case b.BLOCK_SEPARATOR_START:f=!0,g="";break;case b.BLOCK_SEPARATOR_END:f=!1,g.length&&e.push(new c(g));break;default:f?g+=a:e.push(a)}}),e},getAuthor:function(){return a.get("VerseDataStore").getAuthorByName(this.authorName)},isMatch:function(a){return this.name===a.name&&this.authorName===a.authorName},normalizeStringToDifficulty:function(a,b){var c=this,d=b===c.DIFFICULTY_EASY?1:2,e=a.split(""),f=[],g=[];return e.forEach(function(a,b){switch(a){case c.BLOCK_SEPARATOR_START:f.push(b);break;case c.BLOCK_SEPARATOR_END:g.push(b)}if(f.length&&f.length===g.length){var h=Math.min(f.length,d),i=function(a,b){b+1!==h&&delete e[a]};f.reverse().forEach(i),g.forEach(i),f=[],g=[]}}),e.join("")}},d}]),angular.module("literatorioApp").factory("VerseDataStore",["$q","$http","_","Verse","VerseAuthor",function(a,b,c,d,e){function f(){return m.getDataStructure||(m.getDataStructure=b({method:"GET",url:"resources/verses/structure.json",responseType:"json"}).then(function(a){return a.data})),m.getDataStructure}function g(a){return f().then(function(b){return b.authors.filter(function(b){return!a||!b.studiedInCountries||b.studiedInCountries.indexOf(a)!==-1}).map(function(a){return new e(a)})})}function h(a){return f().then(function(b){var d=c.findWhere(b.authors,{name:a});return d?new e(d):null})}function i(a){var b=null;if(a){var e;b=g(a).then(function(a){return e=a.map(function(a){return a.name}),f()}).then(function(a){return a.verses.filter(function(a){return e.indexOf(a.authorName)!==-1})})}else b=f().then(function(a){return a.verses});return b.then(function(a){return a=a.filter(function(a){return a.isWellKnown}),a.length?new d(c.sample(a)):null})}function j(a){return f().then(function(b){return c.where(b.verses,{authorName:a}).map(function(a){return new d(a)})})}function k(a){return j(a).then(function(a){return c.sample(a)})}function l(a,b){return f().then(function(e){var f=c.findWhere(e.verses,{authorName:a,name:b});return f?new d(f):null})}var m={};return f(),{getDataStructure:f,getAuthorsList:g,getAuthorByName:h,getRandomVerse:i,getVersesForAuthor:j,getRandomVerseForAuthor:k,getVerseByAuthorAndName:l}}]),angular.module("literatorioApp").service("VerseBlock",["$speakingurl",function(a){function b(a){this._string=a,this._stringNormalized=this.normalizeString(a)}return b.prototype={match:function(a,b){return!(a.length<Math.min(this._string.length,b))&&0===this._stringNormalized.indexOf(this.normalizeString(a.substr(0,b)))},normalizeString:function(b){return b=(b+"").toLowerCase().replace("ё","е"),a.getSlug(b)},toString:function(){return this._string},valueOf:function(){return this.toString()}},b}]),angular.module("literatorioApp").factory("VerseAuthor",["$injector",function(a){function b(a){angular.extend(this,{verses:[]},a)}return b.prototype={getVerses:function(){var b=this;return a.get("VerseDataStore").getVersesForAuthor(b.name).then(function(a){b.verses=a})}},b}]),angular.module("literatorioApp").controller("Verse404Ctrl",["Analytics","$rootScope",function(a,b){a.trackEvent("web","verse404-init"),b.$broadcast("HeaderCtrl.doShow"),b.$broadcast("FooterCtrl.doShow")}]),angular.module("literatorioApp").controller("FooterCtrl",["$scope",function(a){function b(){a.isVisible=!1,a.$on("FooterCtrl.doShow",d),a.$on("FooterCtrl.doHide",c)}function c(){a.isVisible=!1}function d(){a.isVisible=!0}b()}]),angular.module("literatorioApp").controller("CountryMenuCtrl",["$scope","$route","CountriesDataStore",function(a,b,c){function d(){a.countries=c.getAvailableCountries(),a.currentCountry=c.getCurrentCountry(),a.notCurrentCountry=e,a.onCountryChange=f}function e(b){return b.countryCode!==a.currentCountry.countryCode}function f(d){c.setCurrentCountry(d),a.currentCountry=c.getCurrentCountry(),b.reload()}d()}]),angular.module("literatorioApp").service("CountriesDataStore",["$rootScope","$translate","$window","_",function(a,b,c,d){function e(){var a=g(c.localStorage.getItem(l))||j(c.navigator.languages||[c.navigator.language||c.navigator.userLanguage])||g(n);i(a)}function f(){return m}function g(a){return d.findWhere(m,{countryCode:a})}function h(){return o}function i(d){o=d,b.use(d.language);try{c.localStorage.setItem(l,d.countryCode)}catch(a){}a.global.currentLang=d.language,a.$broadcast("CountriesDataStore.countryChange",{country:d})}function j(a,b){var c=a.map(function(a){return(""+a).toLowerCase()});b||(b=f());var d=null,e=null;return b.forEach(function(a){a.languageCodes.forEach(function(b){b=b.toLowerCase();var f=c.indexOf(b);f!==-1&&(null===e||f/a.languageCodes.length<e)&&(e=f/a.languageCodes.length,d=a)})}),d}function k(a,b){return b||(b=h()),b.percentsToMark?b.percentsToMark(a):null}var l="CountriesDataStore.currentCountryCode",m=[{countryCode:"ru",title:"Россия",languageCodes:["ru","ru-RU"],language:"ru",isCatalogEnabled:!0,percentsToMark:function(a){return a<50?"3":a<60?"4-":a<70?"4":a<80?"4+":a<90?"5-":a<99?"5":"5+"}},{countryCode:"en",title:"England",languageCodes:["en","en-GB","en-US","us"],language:"en",isCatalogEnabled:!0,percentsToMark:function(a){return a<50?"D":a<60?"C":a<70?"B-":a<80?"B":a<90?"A-":a<99?"A":"A+"}},{countryCode:"us",title:"USA",languageCodes:["us","en-US","en"],language:"en",isCatalogEnabled:!0,percentsToMark:function(a){return a<50?"D":a<60?"C":a<70?"B-":a<80?"B":a<90?"A-":a<99?"A":"A+"}}],n="ru",o=null;return e(),{getAvailableCountries:f,getCountryByCode:g,getCurrentCountry:h,setCurrentCountry:i,getMarkForPercents:k,determineCountryByLanguage:j}}]),angular.module("literatorioApp").controller("HeaderCtrl",["$scope",function(a){function b(){a.isVisible=!1,a.$on("HeaderCtrl.doShow",d),a.$on("HeaderCtrl.doHide",c)}function c(){a.isVisible=!1}function d(){a.isVisible=!0}b()}]),angular.module("literatorioApp").service("SoundManager",["$injector",function(a){function b(a){c&&c.getSound(a).start()}var c=null;try{c=a.get("SoundService"),c.loadSound({name:"bell",src:"resources/sounds/bell.mp3"})}catch(a){console.warn("[SoundManager] WebAudio is not supported")}return{playSound:b}}]),angular.module("literatorioApp").controller("ShareCtrl",["$scope","Analytics",function(a,b){function c(a){b.trackEvent("web","share-click",a)}a.shareUrl=window.location.href,a.shareTitle="",a.shareDescription="",a.shareImage=window.location.href.replace(/#.*/,"")+"images/og_image_560x292.jpg",a.onClick=c}]),angular.module("literatorioApp").controller("GitHubRibbonCtrl",["$scope","Analytics",function(a,b){function c(){a.isVisible=!1,a.$on("GitHubRibbonCtrl.doShow",e),a.$on("GitHubRibbonCtrl.doHide",d),a.onClick=f}function d(){a.isVisible=!1}function e(){a.isVisible=!0}function f(){b.trackEvent("web","git-hub-ribbon-click")}c()}]),angular.module("literatorioApp").controller("CatalogCtrl",["$rootScope","$scope","$timeout","$location","$translate","VerseDataStore","CountriesDataStore","Analytics",function(a,b,c,d,e,f,g,h){function i(){h.trackEvent("web","catalog-init"),e().then(function(){a.global.pageTitle=e.instant("VIEW_CATALOG_TITLE")+" | "+e.instant("COMMON_APP_NAME")}),f.getAuthorsList(g.getCurrentCountry().countryCode).then(function(a){b.authors=a,a.forEach(function(a){a.getVerses()})}),b.authorsFilter=j,b.onVerseLinkClick=l,b.onRandomVerseButtonClick=m,a.$broadcast("HeaderCtrl.doShow"),a.$broadcast("FooterCtrl.doShow"),a.$broadcast("GitHubRibbonCtrl.doHide")}function j(a){return!(!a.verses||!a.verses.length)&&"test-a-t"!==a.name}function k(e){return b.isLeaving=!0,c(function(){d.url(e)},1500),a.$broadcast("HeaderCtrl.doHide"),a.$broadcast("FooterCtrl.doHide"),a.$broadcast("GitHubRibbonCtrl.doHide"),!1}function l(a,b){if(h.trackEvent("web","catalog-verse-link-click"),!a.metaKey)return k(b.url),a.preventDefault()}function m(){f.getRandomVerse().then(function(a){k(a.url),h.trackEvent("web","catalog-random-verse-btn-click")})}i()}]),angular.module("literatorioApp").controller("SupportCtrl",["$rootScope","Analytics","$translate","$scope",function(a,b,c,d){function e(){a.global.pageTitle=c.instant("COMMON_APP_NAME"),d.onPaypalClick=f,g("html, body").animate({scrollTop:0}),a.$broadcast("HeaderCtrl.doShow"),a.$broadcast("FooterCtrl.doShow"),a.$broadcast("GitHubRibbonCtrl.doHide"),b.trackEvent("web","support-init")}function f(){b.trackEvent("web","support-donate-click","paypal")}var g=angular.element;e()}]),angular.module("literatorioApp").run(["$templateCache",function(a){a.put("views/about.html","<div class=\"view-about\"> <h3>{{ 'VIEW_ABOUT_CREATOR_TITLE' | translate }}</h3> <p><a href=\"http://bobrosoft.com\" target=\"_blank\">{{ 'VIEW_ABOUT_CREATOR_NAME' | translate }}</a></p> <h3>{{ 'VIEW_ABOUT_SOCIAL_TITLE' | translate }}</h3> <p> <a href=\"https://vk.com/literatorio\" target=\"_blank\">VKontakte</a> / <a href=\"https://www.facebook.com/LiteratorioApp/\" target=\"_blank\">Facebook</a> </p> <h3>{{ 'VIEW_ABOUT_CONTRIBUTE_TITLE' | translate }}</h3> <p><a href=\"https://github.com/bobrosoft/literator.io-verses\" target=\"_blank\">{{ 'VIEW_ABOUT_CONTRIBUTE_VERSES_REPO' | translate }}</a></p> <p><a href=\"https://github.com/bobrosoft/literator.io\" target=\"_blank\">{{ 'VIEW_ABOUT_CONTRIBUTE_APP_REPO' | translate }}</a></p> <h3>{{ 'VIEW_ABOUT_VERSES_TITLE' | translate }}</h3> <p>{{ 'VIEW_ABOUT_VERSES_DISCLAIMER' | translate }}</p> <p>{{ 'VIEW_ABOUT_VERSES_HOW_TO_ADD' | translate }} <a href=\"{{global.currentLang === 'ru' ? 'https://vk.com/topic-130142643_35492394' : 'https://www.facebook.com/LiteratorioApp'}}\" target=\"_blank\">{{ 'VIEW_ABOUT_VERSES_HOW_TO_ADD_LINK' | translate }}</a></p> <h3>{{ 'VIEW_ABOUT_CONTACTS_TITLE' | translate }}</h3> <p><a href=\"{{global.currentLang === 'ru' ? 'https://vk.com/literatorio' : 'https://www.facebook.com/LiteratorioApp'}}\" target=\"_blank\">{{ 'VIEW_ABOUT_CONTACTS_LINK' | translate }}</a></p> <p><br><a href=\"#/support\">{{ 'VIEW_ABOUT_SUPPORT_THE_PROJECT' | translate }}</a></p> </div>"),a.put("views/catalog.html",'<div class="view-catalog" ng-class="{leaving: isLeaving}"> <h3 class="title">{{ \'VIEW_CATALOG_TITLE\' | translate }}</h3> <div class="list"> <div class="item" ng-repeat="author in ::authors | filter: authorsFilter | orderBy: \'shortName\'"> <h4 class="author">{{ ::author.shortName }} <a ng-href="{{ ::author.wikiLink }}" ng-show="::author.wikiLink" target="_blank" title="Wiki"><img src="images/common/ext_link_icon.svg"></a></h4> <ul> <li ng-repeat="verse in ::author.verses | orderBy: \'title\'"><a ng-href="#{{ ::verse.url }}" ng-click="onVerseLinkClick($event, verse)">{{ ::verse.title }}<span ng-if="verse.title.length < 6 && verse.description" class="description"> / {{ ::verse.description }}</span></a></li> </ul> </div> </div> <div class="bottom"> <a href="" class="button" ng-click="onRandomVerseButtonClick()">{{ \'VIEW_CATALOG_RANDOM_VERSE_BTN\' | translate }}</a> <p class="disclaimer"> <br>{{ \'VIEW_CATALOG_DISCLAIMER_LINE_1\' | translate }} <br>{{ \'VIEW_CATALOG_DISCLAIMER_LINE_2\' | translate }} <a href="{{global.currentLang === \'ru\' ? \'https://vk.com/topic-130142643_35492394\' : \'https://www.facebook.com/LiteratorioApp\'}}" target="_blank">{{ \'VIEW_CATALOG_DISCLAIMER_LINE_2_LINK\' | translate }}</a> </p> </div> </div>'),a.put("views/countrymenu.html",'<li class="view-country-menu" ng-controller="CountryMenuCtrl"> <ul> <li ng-repeat="country in countries | filter:notCurrentCountry track by $index"><a href="" ng-click="onCountryChange(country)">{{ country.title }}</a></li> </ul> <a href="" class="main-link"><img src="images/main/country_menu_icon.png"> {{ currentCountry.title }}</a> </li>'),a.put("views/footer.html",'<div id="footer" ng-controller="FooterCtrl" ng-class="{show: isVisible}"> <div class="top-border"></div> <div> <p class="phrase"> <a href="#/about">{{ \'FOOTER_MAIN_PHRASE_LEFT\' | translate }} <span class="heart">&#x2661;</span> {{ \'FOOTER_MAIN_PHRASE_RIGHT\' | translate }}</a> </p> <p class="phrase"> <a href="#/about">{{ \'FOOTER_ABOUT_PROJECT_LINK\' | translate }}</a> </p> </div> </div>'),a.put("views/githubribbon.html",'<a ng-controller="GitHubRibbonCtrl" class="view-github-ribbon" ng-class="{show: isVisible}" href="https://github.com/bobrosoft/literator.io" target="_blank" ng-click="onClick()">Fork me on GitHub</a>'),a.put("views/header.html",'<ul id="header" ng-controller="HeaderCtrl" ng-class="{show: isVisible}"> <li><a class="logo" href="#/" ng-class="{show: global.currentPage != \'main\'}">{{ \'COMMON_APP_NAME\' | translate }}</a></li> <li class="spacer"></li> <ng-include src="\'views/countrymenu.html\'"></ng-include> </ul>'),a.put("views/main.html",'<div class="view-main" ng-class="{leaving: isLeaving}"> <div class="logo" ng-show="global.currentLang" itemscope itemtype="http://schema.org/Organization"> <a itemprop="url" href="#/"> <img itemprop="logo" ng-src="images/main/logo_{{ global.currentLang == \'ru\' ? \'ru\' : \'en\' }}.png" alt="Literator.io"> </a> </div> <div class="menu"> <div> <a href="" class="button start" ng-click="onStartButtonClick()">{{ \'VIEW_MAIN_START_BTN\' | translate }}</a> </div> <div class="other"> <div class="monogram" ng-show="isCatalogEnabled"> <img src="images/common/mono-narrow.svg"> </div> <p ng-show="isCatalogEnabled"> <a href="#/catalog" ng-click="onCatalogClick()">{{ \'VIEW_MAIN_VERSES_LIST\' | translate }}</a> </p> </div> </div> <div class="bottom" ng-class="{\'share-show\': isSharePanelShown}"> <div> &nbsp;&nbsp;&nbsp; {{ \'VIEW_MAIN_WE_IN\' | translate }} <a class="vk" target="_blank" href="https://vk.com/literatorio" ng-click="onSocialClick(\'vk\')">VK</a> / <a class="fb" target="_blank" href="https://www.facebook.com/LiteratorioApp/" ng-click="onSocialClick(\'fb\')">Facebook</a> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <a href="" ng-click="onShareClick()" class="share-link">{{ \'VIEW_MAIN_SHARE\' | translate }}</a> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <a href="#/support" ng-click="onSupportClick()">{{ \'VIEW_MAIN_SUPPORT_PROJECT\' | translate }}</a> &nbsp;&nbsp;&nbsp; </div> <ng-include src="\'views/share.html\'" ng-controller="ShareCtrl" ng-init="shareTitle = (&quot;VIEW_MAIN_SHARE_TITLE&quot; | translate)"></ng-include> </div> </div>'),a.put("views/share.html",'<div class="view-share"> <a target="_blank" href="https://vk.com/share.php?url={{shareUrl | encodeURIComponent}}&title={{shareTitle | encodeURIComponent}}&description={{shareDescription | encodeURIComponent}}&image={{shareImage | encodeURIComponent}}&noparse=true" ng-click="onClick(\'vk\')" ng-include="\'images/common/share/vk.svg\'">Vkontakte</a> <a target="_blank" href="https://www.ok.ru/dk?st.cmd=addShare&st.s=1&st._surl={{shareUrl | encodeURIComponent}}&st.comments={{shareTitle | encodeURIComponent}}" ng-click="onClick(\'ok\')" ng-include="\'images/common/share/ok.svg\'">Odnoklassniki</a> <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u={{shareUrl | encodeURIComponent}}&title={{shareTitle | encodeURIComponent}}&description={{shareDescription | encodeURIComponent}}" ng-click="onClick(\'facebook\')" ng-include="\'images/common/share/facebook.svg\'">Facebook</a> <a target="_blank" href="https://twitter.com/intent/tweet?url={{shareUrl | encodeURIComponent}}&text={{shareTitle | encodeURIComponent}}" ng-click="onClick(\'twitter\')" ng-include="\'images/common/share/twitter.svg\'">Twitter</a> </div>'),a.put("views/support.html",'<div class="view-support"> <h3>{{ \'VIEW_SUPPORT_TITLE\' | translate }}</h3> <h4>{{ \'VIEW_SUPPORT_SHARE_TITLE\' | translate }}</h4> <p> <ng-include src="\'views/share.html\'" ng-controller="ShareCtrl" ng-init="shareTitle = (&quot;VIEW_MAIN_SHARE_TITLE&quot; | translate)"></ng-include> </p> <h3>{{ \'VIEW_SUPPORT_DONATE_TITLE\' | translate }}</h3> <h4 ng-if="global.currentLang === \'ru\'">{{ \'VIEW_SUPPORT_DONATE_PAYPAL\' | translate }}</h4> <p> <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" ng-submit="onPaypalClick()"> <input type="hidden" name="cmd" value="_s-xclick"> <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHZwYJKoZIhvcNAQcEoIIHWDCCB1QCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYC/mN6PcWYRlJrm6J2JVkJNHMFYMRReO6Z/z306LOMuKO3aGfxADatIECjmNjg1fe0DGJkbq+xF86E++gZw2vihuhdee8t0G2vNFqnx3fDGdenIaH4iuFxSH25hKony8kJwfCLWmECpvRotNv4MH3u6af+QGyOO6DTGgJxNz7HslzELMAkGBSsOAwIaBQAwgeQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIdlW8Fez7PlaAgcA4Fllqy4ZdsfP5Kn9uF63kNX7TbbGNPo+FGaPg0BH2YI0X51IU+5GRkmkWmw3eQcaBohIcsBW9LI5buoVhYIVfNWymfP1A7GvC9IROmLH2vMZLO+idIeCMCsqbf+UE5L/0viQIK9zW3MiIIwBkiPaivy1joXUtn5S1VGIFgGdrjLkNLqSHIwplnMPl3YlnNt01yrtqS5WZAbDq3OKB5Mhg4oYS1fsjks3cSLv1OTpCIERqNuhdajO+BNi+5jnsn7ygggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xNzAxMzAxOTI2MTVaMCMGCSqGSIb3DQEJBDEWBBQmjeLxp+Aky1Z0EdpiBr57kXosUDANBgkqhkiG9w0BAQEFAASBgKUhXUztsjbFmVD6BPn/xLWgiLOcaS5sYmJ/VO9bH8U4xwXYZ22qKszi/6ZrWOq2oq7B8jVLP2GBiqP9UkEW0FoY4Tl0l6IdV/TnudeGC9tHsq5VN4DuMgGqJYfwUH5bjM5PIh82GrvCsQIUyk7K1I8HuXCCZfHSWztLJol02uvB-----END PKCS7-----"> <input type="image" src="https://www.paypalobjects.com/en_US/RU/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!"> <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"> </form> </p> <h4 ng-if="global.currentLang === \'ru\'">{{ \'VIEW_SUPPORT_DONATE_YANDEX\' | translate }}</h4> <p ng-if="global.currentLang === \'ru\'" class="yandex"> <iframe frameborder="0" allowtransparency="true" scrolling="no" src="https://money.yandex.ru/quickpay/button-widget?account=41001165403721&quickpay=small&yamoney-payment-type=on&button-text=06&button-size=m&button-color=orange&targets=%D0%9D%D0%B0+%D1%80%D0%B0%D0%B7%D0%B2%D0%B8%D1%82%D0%B8%D0%B5+Literator.io&default-sum=100&successURL=" width="209" height="36"></iframe> <iframe frameborder="0" allowtransparency="true" scrolling="no" src="https://money.yandex.ru/quickpay/button-widget?account=41001165403721&quickpay=small&mobile-payment-type=on&button-text=06&button-size=m&button-color=orange&targets=%D0%9D%D0%B0+%D1%80%D0%B0%D0%B7%D0%B2%D0%B8%D1%82%D0%B8%D0%B5+Literator.io&default-sum=100&successURL=" width="209" height="36"></iframe> </p> </div>'),a.put("views/verse.html",'<div class="view-verse" ng-class="{leaving: isLeaving}"> <div> <div class="top" ng-show="verse.title"> <h1 class="title">{{ ::verse.title }}</h1> <p class="description">{{ ::verse.description }}</p> <img class="monogram" src="images/verse/mono-top.png"> </div> <div class="content"> <div> <div class="width-spacer">{{ ::verse.plainText }}</div> <!-- TODO: go away from ng-repeat below --> <div class="pieces"><span ng-repeat="piece in versePieces track by $index">{{::piece + \'\'}}</span><input ng-class="{visible: currentBlock, hidden: !currentBlock}" ng-keyup="onInputFieldKeyup()" autocorrect="off" autocomplete="off" autocapitalize="off" maxlength="{{inputFieldMaxLength}}"></div> <div class="author" ng-show="isFinished"> <p class="name">{{ ::author.shortName }}</p> <p class="year">{{ ::verse.year }} {{ \'VIEW_VERSE_SHORT_YEAR\' | translate }}</p> <img class="monogram" src="images/verse/mono-bottom.png"> </div> </div> </div> <div class="panels" ng-show="!isFinished"> <div class="panel hint" ng-class="{show: isControlsHintVisible}"> <p>{{ (isIOS ? \'VIEW_VERSE_CONTROLS_HINT_IOS\' : \'VIEW_VERSE_CONTROLS_HINT\') | translate }}</p> </div> <div class="panel skip" ng-class="{show: isSkipVerseOptionsVisible}"> <p> <a href="" class="button" ng-click="onSkipVerseAcceptClick()">{{ \'VIEW_VERSE_SKIP_ACCEPT_BTN\' | translate}}</a> <a href="" class="button" ng-click="onSkipVerseDeclineClick()">{{ \'VIEW_VERSE_SKIP_DECLINE_BTN\' | translate}}</a> </p> </div> </div> <div class="bottom"> <div class="ending" ng-if="isBottomVisible"> <div class="result" ng-show="!isSkipped"> <div class="result-text"> <div class="line-1">{{ \'VIEW_VERSE_RESULT_LINE_1\' | translate }}</div> <div class="line-2">{{ resultPercentsAnimated }}%</div> <div class="line-3">{{ \'VIEW_VERSE_RESULT_LINE_3\' | translate }} <span ng-if="resultSeconds > 60">{{ resultSeconds / 60 | number: 0 }} {{ \'VIEW_VERSE_RESULT_MINUTES\' | translate }}</span> {{ resultSeconds % 60 | number: 0 }} {{ \'VIEW_VERSE_RESULT_SECONDS\' | translate }}</div> </div> <div class="result-visual" ng-class="{\'show-mark\': isMarkVisible}"> <div class="empty"></div> <div class="filled" ng-style="{height: resultPercentsAnimated + \'%\'}"> <div class="filler"></div> </div> <div class="mark" ng-class="{\'high\': resultPercents > 70}">{{ ::resultMark }}</div> </div> </div> <h3 class="share-title" ng-show="resultPercents > 60">{{ \'VIEW_VERSE_SHARE_MARK_TITLE\' | translate }}</h3> <ng-include src="\'views/share.html\'" ng-if="verse.title" ng-controller="ShareCtrl" ng-init="shareTitle = (resultPercents > 60 ? ((&quot;VIEW_VERSE_SHARE_MARK_PRE&quot; | translate) + &quot; &quot; + resultMark + &quot;. &quot;) : &quot;&quot;) + (&quot;VIEW_VERSE_SHARE_TITLE_PRE&quot; | translate) + &quot; \\&quot;&quot; + verse.title + &quot;\\&quot; (&quot; + author.shortName + &quot;)&quot;"></ng-include> <div class="buttons"> <div><a href="" class="button another-verse" ng-click="onAnotherVerseButtonClick()">{{ \'VIEW_VERSE_ANOTHER_VERSE_BTN\' | translate }}</a></div> <div><a href="" ng-if="author.verses.length > 1" class="button another-verse-of-author" ng-click="onAnotherVerseOfAuthorButtonClick()">{{ \'VIEW_VERSE_ANOTHER_VERSE_OF_AUTHOR_BTN\' | translate }}</a></div> </div> </div> </div> </div> </div>'),a.put("views/verse404.html",'<div class="view-verse404"> <div> <p class="number"><span>4</span><span>0</span><span>4</span></p> <img class="monogram" src="images/verse/mono-bottom.png"> <p class="message">{{ \'VIEW_VERSE_404_MESSAGE\' | translate }}</p> </div> </div>');
}]);